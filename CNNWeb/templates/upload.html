<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>基于卷积神经网络的微博情感分析工具</title>

	<link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
	<link rel="stylesheet" href="/assets/materialize/css/materialize.min.css" media="screen,projection" />
    <!-- Bootstrap Styles-->
    <link href="/assets/css/bootstrap.css" rel="stylesheet" />
    <!-- FontAwesome Styles-->
    <link href="/assets/css/font-awesome.css" rel="stylesheet" />
    <!-- Morris Chart Styles-->
    <link href="/assets/js/morris/morris-0.4.3.min.css" rel="stylesheet" />
    <!-- Custom Styles-->
    <link href="/assets/css/custom-styles.css" rel="stylesheet" />
    <!-- Google Fonts-->
    <link href='http://fonts.googleapis.com/css?family=Open+Sans' rel='stylesheet' type='text/css' />
    <link rel="stylesheet" href="/assets/js/Lightweight-Chart/cssCharts.css">

</head>
<body>
<div id="wrapper">
    <nav class="navbar navbar-default top-navbar" role="navigation">
            <div class="navbar-header">
                <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".sidebar-collapse">
                    <span class="sr-only">Toggle navigation</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
                <a class="navbar-brand waves-effect waves-dark" href="/"><i class="large material-icons">insert_chart</i> <strong>CNNWB</strong></a>

		<div id="sideNav" href="/"><i class="material-icons dp48">toc</i></div>
            </div>
    </nav>
    <nav class="navbar-default navbar-side" role="navigation">
            <div class="sidebar-collapse">
                <ul class="nav" id="main-menu">

                    <li>
                        <a id="run_state" href="/" class="waves-effect waves-dark"><i class="fa fa-dashboard"></i>运行状态</a>
                    </li>
                    <li>
                        <a id='upload_file' href="/upload" class="waves-effect waves-dark"><i class="fa fa-arrow-circle-o-up"></i> 上传文件</a>
                    </li>
					<li>
                        <a id = 'train_model' href="/train" class="waves-effect waves-dark"><i class="fa fa-coffee"></i> 训练模型 </a>
                    </li>
                    <li>
                        <a id = 'eval_model' href="/eval" class="waves-effect waves-dark"><i class="fa fa-bar-chart-o"></i> 评价模型 </a>
                    </li>
                    <li>
                        <a href="#" class="waves-effect waves-dark"><i class="fa fa-sitemap"></i> 快速浏览<span class="fa arrow"></span></a>
                        <ul class="nav nav-second-level">
                            <li>
                                <a href="#" class="waves-effect waves-dark">Second Level Link</a>
                            </li>
                            <li>
                                <a href="#" class="waves-effect waves-dark">Second Level Link</a>
                            </li>
                            <li>
                                <a href="#" class="waves-effect waves-dark">Second Level Link<span class="fa arrow"></span></a>
                                <ul class="nav nav-third-level">
                                    <li>
                                        <a href="#">Third Level Link</a>
                                    </li>
                                    <li>
                                        <a href="#">Third Level Link</a>
                                    </li>
                                    <li>
                                        <a href="#">Third Level Link</a>
                                    </li>

                                </ul>

                            </li>
                        </ul>
                    </li>
                </ul>

            </div>

        </nav>
<button data-toggle="dropdown" class="btn btn-primary dropdown-toggle">Action <span class="caret"></span></button>
<div id="page-wrapper">
    <div class="header">
       <h1  class="page-header"></h1>
			<ol class="breadcrumb">
              <li><a href="">Home</a></li>
              <li><a id="pageheader" href="/upload">upload</a></li>
			</ol>
    </div>
    <div id="page-inner">
    <div class="row">
                <div class="col-md-12">
                    <!-- Advanced Tables -->
                    <div class="card">
                        <div class="card-action">
                             现有数据集
                        </div>
                        <div class="card-content">
                            <div class="table-responsive">
                                <table class="table table-striped table-bordered table-hover" id="dataTables-dataset">
                                    <thead>
                                        <tr>
                                            <th>数据集名称</th>
                                            <th>数据量</th>
                                            <th>正、负文本比</th>
                                            <th>数据来源</th>
                                            <th>上传时间</th>
                                        </tr>
                                    </thead>
                                    <tbody id = "dataset_table">

                                    </tbody>
                                </table>
                            </div>

                        </div>
                    </div>
                    <!--End Advanced Tables -->
                </div>
            </div>
    <div class="row">
        <div class="col-md-12">
            <div class="card">
                <div class="card-content">
                <form >
                    <div class="row">
                        <div class="input-field col s6">
                          <input id="dataset_name" type="text" class="validate">
                          <label for="dataset_name">数据集名称</label>
                        </div>
						 <div class="input-field col s6">
                          <input id="dataset_source" type="text" class="validate">
                          <label for="dataset_source">数据集来源</label>
                        </div>

                    </div>
                    <div class="file-field input-field">
                      <div class="btn" style="font-size: 12px;background-color: #319DB5">
                        <span>
                            <p><b>上传文件</b></p>
                        </span>
                        <input id="files" type="file" multiple>
                      </div>
                      <div class="file-path-wrapper">
                        <input class="file-path validate" type="text" placeholder="Upload one or more files">
                      </div>
                    </div>
                    <input type="button" class="waves-effect waves-orange btn" style="align-content:center; padding-left:50px; padding-right: 50px " id="submit" value="提交">
                </form>
                </div>
            </div>

        </div>
    </div>
    </div>
</div>
</div>
    <script src="/assets/js/jquery-1.10.2.js"></script>
	<script >
        function fill_table(name,size,pn,source,date) {
            var html = '<tr class="odd gradeX">'+
                    '<td>'+name+'</td>'+
                    '<td>'+size+'</td>'+
                    '<td>'+pn+'</td>'+
                    '<td class="center">'+source+'</td>'+
                    '<td class="center">'+date+'</td>'+
                '</tr>'
            return html
        }
        $(document).ready(function () {
            var thispage = '{{ pagename }}'
            var originclass = $("a#" + thispage).attr('class')
            $("a#" + thispage).attr('class', 'active-menu ' + originclass)
            var DS = $.ajax({
            url:'/dataset/',
            success:function (data) {
                html = ''
                dataset_num = data.length
                for (var i = 0;i<data.length;i++){
                    console.log(data[i])
                    html+=fill_table(data[i]['name'],data[i]['size'],data[i]['np'],data[i]['source'],data[i]['date_time'])
                }
               $('tbody#dataset_table').html(html)

            }
        })

        })
        $("input#submit").click(function () {
            console.log('clk')
            var data = new FormData()
            data.append('name',$('input#dataset_name').val())
            data.append('source',$('input#dataset_source').val())
            data.append('fileupload',$('#files')[0].files[0])
            $.ajax({
                url:'/upload/',
                type:'POST',
                data:data,
                cache:false,
                contentType:false,
                processData:false

            }).done(function (res) {
                console.log(res)

            }).fail(function () {
                console.log(res)
            })
        })
    </script>
	<!-- Bootstrap Js -->
    <script src="/assets/js/bootstrap.min.js"></script>

	<script src="/assets/materialize/js/materialize.min.js"></script>

    <!-- Metis Menu Js -->
    <script src="/assets/js/jquery.metisMenu.js"></script>
    <!-- Morris Chart Js -->
    <script src="/assets/js/morris/raphael-2.1.0.min.js"></script>
    <script src="/assets/js/morris/morris.js"></script>


	<script src="/assets/js/easypiechart.js"></script>
	<script src="/assets/js/easypiechart-data.js"></script>

	 <script src="/assets/js/Lightweight-Chart/jquery.chart.js"></script>

    <!-- Custom Js -->
    <script src="/assets/js/custom-scripts.js"></script>
</body>
</html>